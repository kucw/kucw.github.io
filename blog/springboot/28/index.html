<!doctype html><html lang=zh-tw><head><meta charset=utf-8><title>Spring Boot 零基礎入門 (28) - MVC 架構模式 - Controller-Service-Dao 三層式架構
</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="介紹 MVC 架構模式，以及 Spring Boot 中的 Controller-Service-Dao 三層式架構"><meta name=author content="古古"><meta property="og:image" content="https://kucw.io/images/logo.png"><meta name=generator content="Hugo 0.145.0 with theme pure"><link rel=stylesheet href=https://kucw.io/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://kucw.io/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://kucw.io/plugins/venobox/venobox.css><link rel=stylesheet href=https://kucw.io/plugins/medium-zoom/medium-zoom.css><link rel=stylesheet href=https://kucw.io/scss/style.min.d0dbde05028230889123aec57bd4277b184ffb8ec8b13e1dae16f3946be51984.css media=screen><link rel="shortcut icon" href=https://kucw.io/images/favicon.png type=image/x-icon><link rel=icon href=https://kucw.io/images/favicon.png type=image/x-icon><script async src="https://www.googletagmanager.com/gtag/js?id=G-FDFT2W6V4S"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-NKQ46H0SJW")</script><script src=https://kucw.io/js/google-firebase-login.min.69fad9ce5fc6ddb2a672d6f8497b357c0eb6b5ff30ceea1601cdd8f2b936213b.js type=module></script></head><body><div class=preloader></div><header class=navigation><div class="container-fluid border-bottom fixed-top nav-background-color"><div class=nav-container><nav class="navbar navbar-expand-lg navbar-white bg-transparent px-0"><a class="navbar-brand desktop-view" href=https://kucw.io/><img class="img-fluid logo-with-text-size mx-1" src=https://kucw.io/images/logo-with-text-transparent.png alt>
</a><a class="navbar-brand navbar-brand-mobile mobile-view" href=https://kucw.io/><img class="img-fluid logo-thumb-sm rounded-circle" src=https://kucw.io/images/logo.png alt>
</a><button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class="ti-menu h3"></i></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav mr-auto ml-2"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>後端技術專欄</a><div class=dropdown-menu><a class=dropdown-item href=https://kucw.io/blog/springboot/1>Spring Boot 零基礎入門</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>線上課程</a><div class=dropdown-menu><a class=dropdown-item href=https://hahow.in/cr/kucw-github-hugo target=_blank rel=noopener>GitHub 免費架站術！輕鬆打造個人品牌</a>
<a class=dropdown-item href=https://hahow.in/cr/springboot target=_blank rel=noopener>Java 工程師必備！Spring Boot 零基礎入門</a>
<a class=dropdown-item href=https://hahow.in/cr/springsecurity target=_blank rel=noopener>資安一把罩！Spring Security 零基礎入門</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>自媒體 & 敗家專區</a><div class=dropdown-menu><a class=dropdown-item href=https://kucw.io/blog/as-a-content-creator/1>軟體工程師的自媒體之路</a></div></li><li class=nav-item><a class=nav-link href=https://kucw.io/>所有文章</a></li><li class=nav-item><a class=nav-link href=https://kucw.io/about>關於我</a></li><li class=nav-item><button id=algolia-search-btn class=algolia-search-btn><i class=ti-search></i></button></li></ul><ul class=navbar-nav><a class=nav-newsletter-link href=/bio target=_blank>電子報訂閱</a></ul></div></nav></div></div></header><div id=algolia-search-pop-overlay class=algolia-search-pop-overlay><div class="popup algolia-search-popup"><div class=algolia-search-header><span class=algolia-search-icon><i class=ti-search></i></span><div id=algolia-search-input-container class=algolia-search-input-container></div><span id=algolia-popup-btn-close class=algolia-popup-btn-close><i class=ti-close></i></span></div><div id=algolia-results class=algolia-results><div id=algolia-hits class=algolia-hits></div><div id=algolia-pagination class=algolia-pagination></div></div></div></div><div id=login-pop-overlay class=login-pop-overlay><div class="popup login-popup"><div class=login-popup-header><img class="img-fluid logo-with-text-size mx-1" src=https://kucw.io/images/logo-with-text-transparent.png alt><div id=login-popup-btn-close class=login-popup-btn-close><i class=ti-close></i></div></div><div class=login-popup-body><button class=google-login-btn id=google-login-btn>
<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.6 10.2c0-.7.0-1.4-.2-2H10V12h5.4c-.3 1.3-1 2.4-2 3v2.6h3.2c2-1.8 3-4.3 3-7.4z" fill="#4285f4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M10 20c2.7.0 5-.9 6.6-2.4L13.4 15a6 6 0 01-9-3.2H1.1v2.6A10 10 0 0010 20z" fill="#34a853"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.4 11.9a6 6 0 010-3.8V5.5H1.1a10 10 0 000 9l3.3-2.6z" fill="#fbbc05"/><path fill-rule="evenodd" clip-rule="evenodd" d="M10 4c1.5.0 2.8.5 3.8 1.5l2.9-2.9A10 10 0 001 5.5l3.3 2.6A6 6 0 0110 4z" fill="#ea4335"/></svg>
<span class=google-login-btn-text>使用 Google 登入</span></button><p class=login-terms>By signing in, you agree to 古古的後端筆記's terms of service and privacy policy.</p></div></div></div><div class=doc-container><div class=row><div class="col-xl-3 col-lg-4"><div class=doc-sidebar><div class="section-sm pb-5"><div class=doc-sidebar-title>目錄</div><ul class=list-unstyled><details open><summary>認識 Spring Boot</summary><ul class="list-unstyled list-nested"><li><a href=https://kucw.io/blog/springboot/1/>Day 1 - Spring Boot 簡介</a></li><li><a href=https://kucw.io/blog/springboot/2/>Day 2 - 開發環境安裝（Mac 版）</a></li><li><a href=https://kucw.io/blog/springboot/3/>Day 3 - 開發環境安裝（Windows 版）</a></li><li><a href=https://kucw.io/blog/springboot/4/>Day 4 - 第一個 Spring Boot 程式</a></li></ul></details><details open><summary>Spring IoC</summary><ul class="list-unstyled list-nested"><li><a href=https://kucw.io/blog/springboot/5/>Day 5 - Spring IoC 簡介</a></li><li><a href=https://kucw.io/blog/springboot/6/>Day 6 - IoC、DI、Bean 的介紹</a></li><li><a href=https://kucw.io/blog/springboot/7/>Day 7 - Bean 的創建和注入 - @Component、@Autowired</a></li><li><a href=https://kucw.io/blog/springboot/8/>Day 8 - 指定注入的 Bean - @Qualifier</a></li><li><a href=https://kucw.io/blog/springboot/9/>Day 9 - Bean 的初始化 - @PostConstruct</a></li><li><a href=https://kucw.io/blog/springboot/10/>Day 10 - 讀取 Spring Boot 設定檔 - @Value、application.properties</a></li></ul></details><details open><summary>Spring AOP</summary><ul class="list-unstyled list-nested"><li><a href=https://kucw.io/blog/springboot/11/>Day 11 - Spring AOP 簡介</a></li><li><a href=https://kucw.io/blog/springboot/12/>Day 12 - Spring AOP 的用法 - @Aspect</a></li></ul></details><details open><summary>Spring MVC</summary><ul class="list-unstyled list-nested"><li><a href=https://kucw.io/blog/springboot/13/>Day 13 - Spring MVC 簡介</a></li><li><a href=https://kucw.io/blog/springboot/14/>Day 14 - Http 協議介紹</a></li><li><a href=https://kucw.io/blog/springboot/15/>Day 15 - Url 路徑對應 - @RequestMapping</a></li><li><a href=https://kucw.io/blog/springboot/16/>Day 16 - 結構化的呈現數據 - JSON 格式介紹</a></li><li><a href=https://kucw.io/blog/springboot/17/>Day 17 - 返回值改成 JSON 格式 - @RestController</a></li><li><a href=https://kucw.io/blog/springboot/18/>Day 18 - 常見的 Http method - GET 和 POST</a></li><li><a href=https://kucw.io/blog/springboot/19/>Day 19 - 取得請求參數（上）- @RequestParam、@RequestBody</a></li><li><a href=https://kucw.io/blog/springboot/20/>Day 20 - 取得請求參數（下）- @RequestHeader、@PathVariable</a></li><li><a href=https://kucw.io/blog/springboot/21/>Day 21 - RESTful API 介紹</a></li><li><a href=https://kucw.io/blog/springboot/22/>Day 22 - RESTful API 實作 - @GetMapping、@PostMapping...</a></li><li><a href=https://kucw.io/blog/springboot/23/>Day 23 - Http Status Code（Http 狀態碼）介紹</a></li></ul></details><details open><summary>Spring JDBC</summary><ul class="list-unstyled list-nested"><li><a href=https://kucw.io/blog/springboot/24/>Day 24 - Spring JDBC 簡介</a></li><li><a href=https://kucw.io/blog/springboot/25/>Day 25 - 資料庫連線設定、IntelliJ 資料庫管理工具介紹</a></li><li><a href=https://kucw.io/blog/springboot/26/>Day 26 - Spring JDBC 的用法（上）- 執行 INSERT、UPDATE、DELETE SQL</a></li><li><a href=https://kucw.io/blog/springboot/27/>Day 27 - Spring JDBC 的用法（下）- 執行 SELECT SQL</a></li><li><a href=https://kucw.io/blog/springboot/28/ class=active>Day 28 - MVC 架構模式 - Controller-Service-Dao 三層式架構</a></li></ul></details><details open><summary>實戰演練</summary><ul class="list-unstyled list-nested"><li><a href=https://kucw.io/blog/springboot/29/>Day 29 - 實戰演練 - 打造一個簡單的圖書館系統</a></li><li><a href=https://kucw.io/blog/springboot/30/>Day 30 - Spring Boot 零基礎入門總結</a></li></ul></details></ul></div></div></div><div class="col-xl-7 col-lg-8"><div class="section-sm pb-5"><h1 class=doc-title>Day 28 - MVC 架構模式 - Controller-Service-Dao 三層式架構</h1><div class=author-details><div><img src=https://kucw.io/images/author-sm.png alt class="author-thumb-blog rounded-circle"></div><div><p>古古</p><p>2024/07/28</p></div></div><hr class=doc-start-divider><div class="content mb-4"><p>哈囉大家好，我是古古。</p><p>在上兩篇文章中，我們有介紹了 Spring JDBC 中的兩個核心用法 <code>update()</code> 和 <code>query()</code>，因此大家就可以透過這兩個方法，在 Spring Boot 中執行想要執行的 SQL 語法了。</p><p>而在介紹完 Spring JDBC 的核心用法之後，接著這篇文章要介紹的，是軟體工程中一個很重要的概念，即是「MVC 架構模式」，所以我們就開始吧！</p><div class=markdown-toc><div class=markdown-toc-title>目錄</div><nav id=TableOfContents><ul><li><a href=#什麼是軟體工程>什麼是軟體工程？</a></li><li><a href=#什麼是-mvc-架構模式>什麼是 MVC 架構模式？</a><ul><li><a href=#model>Model</a></li><li><a href=#controller>Controller</a></li><li><a href=#view>View</a></li><li><a href=#小結>小結</a></li><li><a href=#mvc-架構模式的優點>MVC 架構模式的優點</a></li></ul></li><li><a href=#controller-service-dao-三層式架構>Controller-Service-Dao 三層式架構</a><ul><li><a href=#controller-層>Controller 層</a></li><li><a href=#service-層>Service 層</a></li><li><a href=#dao-層>Dao 層</a></li><li><a href=#小結-1>小結</a></li></ul></li><li><a href=#實際使用-controller-service-dao-三層式架構>實際使用 Controller-Service-Dao 三層式架構</a><ul><li><a href=#在使用-controller-service-dao-三層式架構之前>在使用 Controller-Service-Dao 三層式架構之前&mldr;</a></li><li><a href=#使用-controller-service-dao-三層式架構之後>使用 Controller-Service-Dao 三層式架構之後！</a></li><li><a href=#controller-層studentcontroller>Controller 層：StudentController</a></li><li><a href=#service-層studentservice>Service 層：StudentService</a></li><li><a href=#dao-層studentdao>Dao 層：StudentDao</a></li><li><a href=#小結-2>小結</a></li></ul></li><li><a href=#使用-controller-service-dao-三層式架構的注意事項>使用 Controller-Service-Dao 三層式架構的注意事項</a><ul><li><a href=#注意事項一透過-class-名字結尾表示這是哪一層>注意事項一：透過 Class 名字結尾，表示這是哪一層</a></li><li><a href=#注意事項二將-controllerservicedao全部變成-bean>注意事項二：將 Controller、Service、Dao，全部變成 Bean</a></li><li><a href=#注意事項三不能在-controller-中直接使用-dao>注意事項三：不能在 Controller 中直接使用 Dao</a></li><li><a href=#注意事項四dao-層只能執行-sql-語法不能添加商業邏輯>注意事項四：Dao 層只能執行 SQL 語法，不能添加商業邏輯</a></li><li><a href=#小結-3>小結</a></li></ul></li><li><a href=#總結>總結</a></li></ul></nav></div><h2 id=什麼是軟體工程 class=markdown-heading-anchor>什麼是軟體工程？
<a href=#%e4%bb%80%e9%ba%bc%e6%98%af%e8%bb%9f%e9%ab%94%e5%b7%a5%e7%a8%8b>#</a></h2><p>在介紹什麼是「MVC 架構模式」之前，我們可以先來看一下，「軟體工程」到底是個什麼樣的概念。</p><p><strong>所謂的軟體工程，即是「在面對一個大型的系統時，工程師們要如何分工合作，一起去解決問題？」</strong>，在這句話裡面有兩個重點，分別是「大型的系統」和「如何分工合作」。</p><p>所以簡單的說的話，當你今天要寫的是一個超過一兩千行的程式，並且在你們的團隊中，是由好幾位工程師一起分工合作來開發，在這種情況下，就會開始需要去注重「軟體工程」了。</p><blockquote><p>補充：當然小型的系統也可以注重軟體工程，不過效益相對不會那麼大。另外也因為在實際的工作中，都是會由許多工程師共同合作、一起合力開發某個大型的功能的，因此掌握好軟體工程的概念可以說是非常重要！</p></blockquote><h2 id=什麼是-mvc-架構模式 class=markdown-heading-anchor>什麼是 MVC 架構模式？
<a href=#%e4%bb%80%e9%ba%bc%e6%98%af-mvc-%e6%9e%b6%e6%a7%8b%e6%a8%a1%e5%bc%8f>#</a></h2><p>大概了解了軟體工程的概念之後，我們可以接著來介紹「MVC 架構模式」的概念是什麼，在了解了MVC 架構模式的概念之後，我們會再來介紹，要如何在 Spring Boot 中去套用 MVC 架構模式的概念。</p><p>所謂的「MVC 架構模式」，他是軟體工程中的一種軟體架構，<strong>而 MVC 架構模式的用途，就是將一個系統，去拆分成「Model、View、Controller」三個部分，並且讓每一個部分都各自負責不同的功能。</strong></p><p>因此在 MVC 架構模式中，各個部分的功能如下：</p><p><img src=/images/blog/springboot/28/28-1.png alt loading=lazy data-zoomable width=3036 height=1439></p><h3 id=model class=markdown-heading-anchor>Model
<a href=#model>#</a></h3><p><strong>在 MVC 架構模式中，Model 負責的是「實作商業邏輯，並且處理數據」。</strong></p><p>由於 Model 是負責商業邏輯的實作，所以我們都會將核心的商業邏輯，寫在 Model 這個部分裡面。</p><p>也因為 Model 同時要負責處理數據，因此 Model 也會需要去跟資料庫做溝通，將這些數據的改動給儲存起來。</p><h3 id=controller class=markdown-heading-anchor>Controller
<a href=#controller>#</a></h3><p><strong>在 MVC 架構模式中，Controller 負責的是「轉發 Http request」。</strong></p><p>所以簡單來說，當 Controller 收到來自前端的 Http request 之後，Controller 就會負責將這些 reque轉發給 Model，讓 Model 去處理後續的操作。</p><h3 id=view class=markdown-heading-anchor>View
<a href=#view>#</a></h3><p><strong>在 MVC 架構模式中，View 負責的是「使用 Html 的模板去呈現數據」。</strong></p><p>不過因為近幾年提倡「前後端分離」的關係，所以版面設計就都會交給前端去處理，因此後端就不需要處理 Html 的版面部分了，只需要改成回傳 JSON 格式的數據給前端即可。</p><p>也因為後端不需要處理 Html 的部分（會交由前端處理），因此 View 在現今的後端架構中，相對來說就沒有那麼重要了。</p><h3 id=小結 class=markdown-heading-anchor>小結
<a href=#%e5%b0%8f%e7%b5%90>#</a></h3><p>所以在這裡先簡單小結一下的話，MVC 架構模式是軟體工程中的一種架構，會將系統拆分成「Model、View、Controller」三個部分，並且讓每一個部分都各自負責不同的功能。</p><p>不過雖然 MVC 架構模式會將程式拆分成三個部分，<strong>但是他實際上並不會去修改程式，MVC 架構模式只是將我們所寫的程式分類一下而已</strong>，可能你今天寫的這段程式是屬於 Model 部分、又或是你今天所寫的程式是屬於 Controller 部分，僅此而已，MVC 架構模式並不會添加什麼新功能到你的程式裡面。</p><p>所以當大家以後看到 MVC 架構模式時，就不用太緊張，他只是試圖要將我們所寫的程式進行分類，這樣在開發大型的系統時，才能更好的進行管理和維護。</p><blockquote><p>補充：MVC 架構模式之所以被稱為是 MVC，原因就是取自於 Model-View-Controller 這三種分類的第一個字母的縮寫，所以才簡稱為 MVC 架構模式。</p></blockquote><h3 id=mvc-架構模式的優點 class=markdown-heading-anchor>MVC 架構模式的優點
<a href=#mvc-%e6%9e%b6%e6%a7%8b%e6%a8%a1%e5%bc%8f%e7%9a%84%e5%84%aa%e9%bb%9e>#</a></h3><p>當我們使用了 MVC 架構模式，將後端程式區分成 Model-View-Controller 這三個部分之後，可以得到以下幾個好處：</p><ul><li><strong>職責分離</strong>，更容易維護程式</li><li>使程式結構更直覺，有利於<strong>團隊分工</strong></li><li><strong>可重複使用</strong>寫好的程式</li></ul><p>也因為使用 MVC 架構模式的好處非常多，因此在現今的 Spring Boot 開發中，基本上統統都是按照這個模式來開發程式，因此了解 MVC 架構模式的概念可以說是非常重要！我們日常的開發基本上都會按照這個模式進行開發。</p><h2 id=controller-service-dao-三層式架構 class=markdown-heading-anchor>Controller-Service-Dao 三層式架構
<a href=#controller-service-dao-%e4%b8%89%e5%b1%a4%e5%bc%8f%e6%9e%b6%e6%a7%8b>#</a></h2><p>了解了 MVC 架構模式的運作方式和優點之後，接著我們就來介紹一下，要如何在 Spring Boot 中，中，去套用 MVC 架構模式的概念。</p><blockquote><p>補充：MVC 架構模式其實是一個比較抽象的概念，具體要怎麼實作，就會依照不同的框架，而有不同寫法。</p></blockquote><p><strong>在 Spring Boot 中，會將「MVC的架構模式」轉化成是 「Controller-Service-Dao 的三層式架構」 來實作。</strong> 因此大家以後只要在 Spring Boot 中看到「Controller-Service-Dao」這種三層式架構時，就可以知道他是套用了 MVC 的架構模式在設計了！</p><p>而在 Controller-Service-Dao 的三層式架構中，其實就是將一份 Spring Boot 專案，區分成 Controller、Service、以及 Dao 這三層來管理，讓每一層都去負責不同的功能。</p><p>像是在下圖中就列出了 Controller、Service、Dao 這三層架構之間的關係，以及他們個別負責的功能：</p><p><img src=/images/blog/springboot/28/28-2.png alt loading=lazy data-zoomable width=3754 height=844></p><h3 id=controller-層 class=markdown-heading-anchor>Controller 層
<a href=#controller-%e5%b1%a4>#</a></h3><p><strong>首先 Controller 層的用途，是負責去「接收前端傳過來的 Http request，並且去驗證請求參數」。</strong></p><p>所以像是我們在 Spring MVC 中所介紹的那些註解，如 <code>@RequestMapping</code>、<code>@RequestParam</code>&mldr;等等，只要是和「前端」進行溝通的部分，就都會放在 Controller 層裡面。</p><h3 id=service-層 class=markdown-heading-anchor>Service 層
<a href=#service-%e5%b1%a4>#</a></h3><p>而當 Controller 層接收到前端傳過來的 Http request、並且對其進行驗證之後，這時候 Controller 就會去 call Service層，讓 Service 負責去接手後續的處理。</p><p><strong>而 Service 層的用途，主要是負責「商業邏輯的處理」</strong>，所以主要的核心商業邏輯，通常都會放在 Service 層裡面來實作。</p><h3 id=dao-層 class=markdown-heading-anchor>Dao 層
<a href=#dao-%e5%b1%a4>#</a></h3><p>而在 Service 層實作核心的商業邏輯時，多多少少都會需要去操作資料庫，因此這時 Service 層就會去 call Dao 層，使用 Dao 層去和資料庫進行溝通。</p><p><strong>因此 Dao 層所負責的功能，就是「專門去和資料庫進行溝通的」</strong>，所以像是我們在 Spring JDBC 中所介紹的所有用法，只要是和「資料庫」溝通的部分，就都會放在 Dao 層裡面來實作。</p><blockquote><p>補充：Dao 層為 Data access object 的縮寫。</p></blockquote><h3 id=小結-1 class=markdown-heading-anchor>小結
<a href=#%e5%b0%8f%e7%b5%90-1>#</a></h3><p>所以在套用 Controller-Service-Dao 三層式架構的設計之後，我們就可以將 Spring Boot 中的程式，依照不同的功能，把他放在不同的層級中來管理。</p><p>因此我們之後就可以透過 Controller-Service-Dao 的三層式架構，更好的去管理和維護 Spring Boot 的程式了！</p><h2 id=實際使用-controller-service-dao-三層式架構 class=markdown-heading-anchor>實際使用 Controller-Service-Dao 三層式架構
<a href=#%e5%af%a6%e9%9a%9b%e4%bd%bf%e7%94%a8-controller-service-dao-%e4%b8%89%e5%b1%a4%e5%bc%8f%e6%9e%b6%e6%a7%8b>#</a></h2><p>了解了 Controller-Serivce-Dao 的三層式架構的概念之後，接著我們也可以來看一下，要如何把我們在<a href=/blog/springboot/27/ target=_blank rel=noopener>上一篇文章</a>中所實作的 StudentController，將他拆分為 Controller、Service、Dao 這三層，進而形成 Controller-Service-Dao 的三層式架構。</p><h3 id=在使用-controller-service-dao-三層式架構之前 class=markdown-heading-anchor>在使用 Controller-Service-Dao 三層式架構之前&mldr;
<a href=#%e5%9c%a8%e4%bd%bf%e7%94%a8-controller-service-dao-%e4%b8%89%e5%b1%a4%e5%bc%8f%e6%9e%b6%e6%a7%8b%e4%b9%8b%e5%89%8d>#</a></h3><p>在以前沒有 Controller-Service-Dao 三層式架構的概念時，我們所寫出來的 Spring Boot 程式，會將「取得前端參數的 <code>@GetMapping</code> &mldr;等功能」以及「和資料庫溝通的 namedParameterJdbcTemplate 功能」，全部放在同一個 class 中實作。</p><p>這樣子雖然同樣可以完成功能，但是在後續的管理和維護上，就會比較吃力。</p><p><img src=/images/blog/springboot/28/28-3.png alt loading=lazy data-zoomable style=max-width:830px;width:100% width=2113 height=1713></p><h3 id=使用-controller-service-dao-三層式架構之後 class=markdown-heading-anchor>使用 Controller-Service-Dao 三層式架構之後！
<a href=#%e4%bd%bf%e7%94%a8-controller-service-dao-%e4%b8%89%e5%b1%a4%e5%bc%8f%e6%9e%b6%e6%a7%8b%e4%b9%8b%e5%be%8c>#</a></h3><p>而當我們將上面的程式，改成是使用 Controller-Service-Dao 的三層式架構來改寫的話，就可以改成下面這種寫法：</p><p><img src=/images/blog/springboot/28/28-4.png alt loading=lazy data-zoomable width=3702 height=794></p><p>當我們套用了 Controller-Service-Dao 的三層式架構之後，就會將原本的程式，拆分成「三個 class」來負責。</p><h3 id=controller-層studentcontroller class=markdown-heading-anchor>Controller 層：StudentController
<a href=#controller-%e5%b1%a4studentcontroller>#</a></h3><p><img src=/images/blog/springboot/28/28-5.png alt loading=lazy data-zoomable style=max-width:750px;width:100% width=2484 height=1636></p><p>首先第一個 class 是 StudentController，因為這個 class 的名字是以 Controller 做為結尾，因此他是代表 Controller 層，負責去和「前端」溝通。</p><p>在 StudentController 裡面，我們只保留 <code>@GetMapping</code> 和 <code>@PathVariable</code> 的部分，也就是使用 Spring MVC 的功能，去和前端溝通，取得前端傳過來的參數 studentId。</p><p>並且在取得 studentId 這個參數的值之後，StudentController 就會去 call StudentService 的 <code>getById()</code> 方法，後續交由 Service 層來處理。</p><h3 id=service-層studentservice class=markdown-heading-anchor>Service 層：StudentService
<a href=#service-%e5%b1%a4studentservice>#</a></h3><p><img src=/images/blog/springboot/28/28-6.png alt loading=lazy data-zoomable style=max-width:660px;width:100% width=2007 height=1439></p><p>第二個 class 則是 StudentService，因為這個 class 的名字是以 Service 做為結尾，因此他是代表 Service 層，負責進行商業邏輯的處理。</p><p>在 StudentService 裡面，我們新增了一個 <code>getById()</code> 的方法，而這個方法的用途，就是「根據 student 的 id，去查詢這一筆 student 的數據出來」。</p><p>因為目前這個例子比較簡單，所以我們沒有太複雜的商業邏輯要實作，所以此處只需要去資料庫中，查詢這一筆 student 的數據出來就可以了。不過因為 Service 層不可以直接和資料庫溝通，因此在 StudentService 這裡，需要再去 call StudentDao 的 <code>getById()</code> 方法，後續交由 Dao 層去和資料庫溝通。</p><h3 id=dao-層studentdao class=markdown-heading-anchor>Dao 層：StudentDao
<a href=#dao-%e5%b1%a4studentdao>#</a></h3><p><img src=/images/blog/springboot/28/28-7.png alt loading=lazy data-zoomable width=2134 height=1836></p><p>最後第三個 class 則是 StudentDao，因為這個 class 的名字是以 Dao 做為結尾，因此他是代表 Dao 層，負責和「資料庫」溝通。</p><p>也因為 StudentDao 是 Dao 層，負責處理和資料庫的溝通，因此我們在這裡就可以使用 Spring JDBC 的功能（即是使用 namedParameterJdbcTemplate 的 <code>query()</code> 方法），從資料庫中查詢 student 的數據出來。</p><h3 id=小結-2 class=markdown-heading-anchor>小結
<a href=#%e5%b0%8f%e7%b5%90-2>#</a></h3><p>所以透過上面這樣子的改寫，我們就將原本的 class 拆分成了三個 class，分別透過 StudentController、StudentService、StudentDao 這三個 class，各自去完成 Controller 層、Service 層、以及 Dao 層的功能。</p><p>因此後續在維護上，假設我們想要修改「查詢的 SQL 語法」的話，那我們就只要去修改 StudentDao 中的程式即可（因為是由 Dao 層管理和資料庫的溝通）。</p><p>又或是如果我們想要修改的是「前端的請求參數」，那我們就只要去修改 StudentController 中的程式即可（因為是由 Controller 層管理和前端的溝通）。</p><p>所以透過 Controller-Service-Dao 的三層式架構，我們就可以將 Spring Boot 程式變得更好管理，以利後續的維護了。</p><p><img src=/images/blog/springboot/28/28-8.png alt loading=lazy data-zoomable width=3702 height=794></p><h2 id=使用-controller-service-dao-三層式架構的注意事項 class=markdown-heading-anchor>使用 Controller-Service-Dao 三層式架構的注意事項
<a href=#%e4%bd%bf%e7%94%a8-controller-service-dao-%e4%b8%89%e5%b1%a4%e5%bc%8f%e6%9e%b6%e6%a7%8b%e7%9a%84%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a0%85>#</a></h2><p>在使用 Controller-Service-Dao 的三層式架構時，有幾個注意事項會需要遵守：</p><h3 id=注意事項一透過-class-名字結尾表示這是哪一層 class=markdown-heading-anchor>注意事項一：透過 Class 名字結尾，表示這是哪一層
<a href=#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a0%85%e4%b8%80%e9%80%8f%e9%81%8e-class-%e5%90%8d%e5%ad%97%e7%b5%90%e5%b0%be%e8%a1%a8%e7%a4%ba%e9%80%99%e6%98%af%e5%93%aa%e4%b8%80%e5%b1%a4>#</a></h3><p>像是在上面的例子中，StudentController class 因為是以 Controller 做為結尾，因此在默契上，我們就會將他視為 Controller 層。</p><p>又或是 StudentService 這個 class，因為他是以 Service 做為結尾，所以我們就會將他視為 Service 層。</p><p>因此大家之後在使用 Controller-Service-Dao 的三層式架構時，就可以透過這個 class 名字的結尾，快速的知道這個 class 是屬於哪一層，進而知道他所負責的功能是「和前端溝通」、「處理商業邏輯」、還是「和資料庫溝通」了。</p><h3 id=注意事項二將-controllerservicedao全部變成-bean class=markdown-heading-anchor>注意事項二：將 Controller、Service、Dao，全部變成 Bean
<a href=#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a0%85%e4%ba%8c%e5%b0%87-controllerservicedao%e5%85%a8%e9%83%a8%e8%ae%8a%e6%88%90-bean>#</a></h3><p>在實作上，我們通常會將 Controller、Service、Dao 這些 class，全部變成是由 Spring 容器所管理的 Bean，並且在後續想要使用他們的時候，再透過 <code>@Autowired</code> 的方式，去注入想要使用的 Bean 進來。</p><p>舉例來說，我們就可以在 StudentController 裡面，使用 <code>@Autowired</code> 去注入 StudentService 進來，這樣子就可以在 StudentController 中去 call StudentService 的方法來使用了。</p><p><img src=/images/blog/springboot/28/28-9.png alt loading=lazy data-zoomable width=3724 height=1465></p><p>同樣的道理，假設 StudentService 想要使用 StudentDao 的話，那就一樣是可以使用 <code>@Autowired</code> 去注入 StudentDao，因此後續就可以在 StudentService 中使用 StudentDao 中的方法，進而去取得資料庫中的數據了。</p><p><img src=/images/blog/springboot/28/28-10.png alt loading=lazy data-zoomable width=3717 height=1853></p><p>所以到這邊大家也可以發現，其實我們在 <a href=/blog/springboot/5/ target=_blank rel=noopener>Day 5～Day 10</a> 所介紹的 Spring IoC 的部分，全部都是為了這裡在鋪陳啊啊！！！</p><p>為了要能夠在 Spring Boot 中運用 Controller-Service-Dao 的三層式架構，所以我們必須要先有 Bean 的概念，了解如何創建 Bean、以及 Bean 之間是怎麼注入的，這樣子後續在實作時，才知道要如何在 StudentService 中，去注入一個 StudentDao 進來。</p><p>因此想要掌握 Spring Boot 中的 Controller-Service-Dao 的用法的話，先決條件就是先了解 Bean 的相關操作！如果對 Bean 不熟悉的話，常常就會被 <code>@Autowired</code> 的各種注入給搞混，這樣反而會不利於大家的開發。</p><p>所以在掌握 Controller-Service-Dao 的三層式架構之前，建議大家一定要了解 Bean 的概念會比較好！</p><blockquote><p>補充：如果對於 Bean 的相關註解 <code>@Component</code>、<code>@Autowired</code> &mldr;等不太熟悉的話，也可以回頭查看 <a href=/blog/springboot/5/ target=_blank rel=noopener>Day 5～Day 10</a> 的介紹。</p></blockquote><h3 id=注意事項三不能在-controller-中直接使用-dao class=markdown-heading-anchor>注意事項三：不能在 Controller 中直接使用 Dao
<a href=#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a0%85%e4%b8%89%e4%b8%8d%e8%83%bd%e5%9c%a8-controller-%e4%b8%ad%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8-dao>#</a></h3><p>在 Controller-Service-Dao 的三層式架構中，每一層的分層是很明確的，而其中就有一項潛規則，即是「Controller 層不能直接使用 Dao 層的 class」。</p><p>所以簡單來說，Controller 就一定只能去 call Service，再讓 Service 去 call Dao，絕對不能讓 Controller 直接去 call Dao 就對了。</p><p><img src=/images/blog/springboot/28/28-11.png alt loading=lazy data-zoomable width=3692 height=935></p><h3 id=注意事項四dao-層只能執行-sql-語法不能添加商業邏輯 class=markdown-heading-anchor>注意事項四：Dao 層只能執行 SQL 語法，不能添加商業邏輯
<a href=#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a0%85%e5%9b%9bdao-%e5%b1%a4%e5%8f%aa%e8%83%bd%e5%9f%b7%e8%a1%8c-sql-%e8%aa%9e%e6%b3%95%e4%b8%8d%e8%83%bd%e6%b7%bb%e5%8a%a0%e5%95%86%e6%a5%ad%e9%82%8f%e8%bc%af>#</a></h3><p>在 Controller-Service-Dao 的三層式架構中，因為 Dao 層的功能是負責「和資料庫溝通」，所以在 Dao class 裡面，只能夠去執行 SQL 語法，去和資料庫中的數據互動，但是 <strong>「不能」</strong> 在 Dao 層裡面添加商業邏輯的程式。</p><p>舉例來說，在取得資料庫的數據之後，如果想要進行排序、或是進行篩選之類的動作，就得回到 Service 層再進行處理（因為 Service 層是負責商業處理）。</p><p>因此在 Controller-Service-Dao 的三層式架構裡面，就會盡量保持 Dao 層僅僅是執行 SQL 語法（或是 ORM 的語法），讓他負責和資料庫溝通的部分就好，而至於複雜的商業邏輯處理，就要回到 Service 層再進行。</p><h3 id=小結-3 class=markdown-heading-anchor>小結
<a href=#%e5%b0%8f%e7%b5%90-3>#</a></h3><p>所以在實作 Controller-Service-Dao 的三層式架構時，除了要將原本的程式拆分成三個 class，分別由 StudentController、StudentService、StudentDao 來負責不同的部分之外，在使用上，也要遵守以下四個注意事項：</p><ul><li>透過 Class 名字結尾，表示這是哪一層</li><li>將 Controller、Service、Dao，全部變成 Bean</li><li>不能在 Contoller 層中直接使用 Dao 層</li><li>Dao 層只能執行 SQL 語法，不能添加商業邏輯</li></ul><p>只要遵守這些注意事項，就能夠實作出一個符合規範的 Controller-Service-Dao 三層式架構了！</p><h2 id=總結 class=markdown-heading-anchor>總結
<a href=#%e7%b8%bd%e7%b5%90>#</a></h2><p>這篇文章我們先介紹了軟體工程的概念，接著介紹了 MVC 架構模式，以及如何將「MVC 架構模式」轉化成 Spring Boot 中的「Controller-Service-Dao 三層式架構」。</p><p>而在 Controller-Service-Dao 的三層式架構中，我們也詳細介紹了 Controller-Service-Dao 三層式架構的用法，並且比較了使用三層式架構的前後差別，最後也補充了實作的注意事項，因此大家後續就可以透過這些用法，在你的 Spring Boot 程式中運用 Controller-Service-Dao 的三層式架構了！</p><p>那麼到這篇文章為止，我們就介紹完 Spring Boot 的基本用法，分別是：</p><ul><li>Day 1 ～ Day 4：Spring Boot 簡介、環境安裝</li><li>Day 5 ～ Day 10：Spring IoC（Bean 的用法）</li><li>Day 11 ～ Day 12：Spring AOP</li><li>Day 13 ～ Day 23：Spring MVC（和前端溝通）</li><li>Day 24 ～ Day 28：Spring JDBC（和資料庫溝通）</li></ul><p>因此學習到這裡，大家就已經具備 Spring Boot 開發的基礎能力了！讚！！所以現在大家其實已經有足夠的能力，能夠去搭建一個簡易的後端系統了。</p><p>所以下一篇文章，我們就會來進行一個實戰演練，總和前面所學習到的所有內容，練習去實作一個圖書館的管理系統出來，那我們就下一篇文章見啦！</p><blockquote><p>補充：本文是擷取自我開設的線上課程 <a href=https://hahow.in/cr/springboot target=_blank rel=noopener>Java 工程師必備！Spring Boot 零基礎入門</a> 的內容，如果你想了解更多的 Spring Boot 的用法，歡迎參考課程簡介 <strong>（輸入折扣碼「HH202506KU」即可享 85 折優惠）。</strong></p></blockquote></div><div class=doc-newsletter><h4>免費訂閱《古古的後端筆記》電子報（長期休刊中）</h4><div><p>每週二學習後端技術，和 3500 人一起變強💪</p><div id=doc-newsletter class=newsletter><div class="row justify-content-center"><div class=col-md-8><div class=success>已發送 Email 驗證信！請前往信箱驗證你的訂閱</div><div class=error>訂閱失敗，請檢查 Email 是否輸入錯誤，或是聯繫 service@kucw.io 取得協助</div><div class=maintenance>電子報伺服器正在維護中，請稍後再試</div></div></div><form action=# method=POST class="row justify-content-center"><div class="input-group col-md-8"><input type=email required name=email class=form-control placeholder="輸入你的 Email"><div class=input-group-append><button type=submit class="input-group-text btn btn-primary">
免費訂閱</button></div></div></form></div></div></div></div><div class=row><div class="col-sm-6 p-2"><a href=/blog/springboot/27/><div class=doc-previous-page><div class=doc-previous-pager-indicator><i class=ti-arrow-left></i>上一頁</div><div class=doc-pager-title>Day 27 - Spring JDBC 的用法（下）- 執行 SELECT SQL</div></div></a></div><div class="col-sm-6 p-2"><a href=/blog/springboot/29/><div class=doc-next-page><div class=doc-next-pager-indicator>下一頁<i class=ti-arrow-right></i></div><div class=doc-pager-title>Day 29 - 實戰演練 - 打造一個簡單的圖書館系統</div></div></a></div></div></div><div class=col-xl-2><div class="doc-right-sidebar pb-5"></div></div></div></div><footer><div class=container><div class="row justify-content-center pb-4"><div class="col-12 text-center mb-5"><a href=https://kucw.io/><img class="img-fluid logo-thumb-md rounded-circle mx-1" src=https://kucw.io/images/logo.png alt=古古的後端筆記></a></div></div><div class="row pb-1"><div class="col-lg-8 text-center pb-5"><h4>免費訂閱電子報，每週二學習後端技術🚀<br>（長期休刊中）</h4><div id=footer-newsletter class=newsletter><div class="row justify-content-center"><div class=col-md-8><div class=success>已發送 Email 驗證信！請前往信箱驗證你的訂閱</div><div class=error>訂閱失敗，請檢查 Email 是否輸入錯誤，或是聯繫 service@kucw.io 取得協助</div><div class=maintenance>電子報伺服器正在維護中，請稍後再試</div></div></div><form action=# method=POST class="row justify-content-center"><div class="input-group col-md-8"><input type=email required name=email class=form-control placeholder="輸入你的 Email"><div class=input-group-append><button type=submit class="input-group-text btn btn-primary">
免費訂閱</button></div></div></form></div></div><div class="col-lg-4 pb-3 footer-contact-me"><h5 class=mb-4>追蹤古古</h5><ul class="list-inline footer-social-links"><li class=list-inline-item><a href=https://github.com/kucw target=_blank rel=noopener><i class=ti-github></i></a></li><li class=list-inline-item><a href=https://www.facebook.com/kucw.io target=_blank rel=noopener><i class=ti-facebook></i></a></li><li class=list-inline-item><a href=https://www.instagram.com/kucw.io/ target=_blank rel=noopener><i class=ti-instagram></i></a></li></ul><p>聯絡信箱: service@kucw.io</p></div></div><div class="border-top py-4 text-center">© 2020-2025 古古的後端筆記 | All Rights Reserved.</div></div></div></footer><script>var indexURL="https://kucw.io/index.json"</script><script src=https://kucw.io/plugins/jQuery/jquery.min.js></script><script src=https://kucw.io/plugins/bootstrap/bootstrap.min.js></script><script src=https://kucw.io/plugins/mailbluster/mailbluster.js></script><script src=https://kucw.io/plugins/confetti/confetti.browser.min.js></script><script src=https://kucw.io/plugins/confetti/welcomeConfetti.js></script><script src=https://kucw.io/plugins/medium-zoom/medium-zoom.min.js></script><script src=https://kucw.io/plugins/algolia-search/algoliasearch.js></script><script src=https://kucw.io/plugins/algolia-search/algoliasearch-lite.umd.js></script><script src=https://kucw.io/plugins/algolia-search/instantsearch.production.min.js></script><script src=https://kucw.io/plugins/clipboard/clipboard.min.js></script><script src=https://kucw.io/plugins/clipboard/code-clipboard.js></script><script src=https://kucw.io/plugins/login/login.js></script><script src=https://kucw.io/js/script.min.aa7e377695025ea8426da51bc7ddbc5d24fa31916deb7d8d442296c493598de4.js></script></body></html>