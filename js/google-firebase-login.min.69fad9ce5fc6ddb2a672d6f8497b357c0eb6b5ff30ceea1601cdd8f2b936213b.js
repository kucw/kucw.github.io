import{initializeApp}from"https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";import{getAuth,signInWithPopup,GoogleAuthProvider,onAuthStateChanged,signOut}from"https://www.gstatic.com/firebasejs/11.6.0/firebase-auth.js";const firebaseConfig={apiKey:"AIzaSyAW-nDyNMTYQGnATOyFam2z7IZASVwmzwA",authDomain:"kucw-io-auth.firebaseapp.com",projectId:"kucw-io-auth",storageBucket:"kucw-io-auth.firebasestorage.app",messagingSenderId:"580673547562",appId:"1:580673547562:web:4e930024eab24834638253"},app=initializeApp(firebaseConfig),auth=getAuth(),provider=new GoogleAuthProvider;document.getElementById("google-login-btn")?.addEventListener("click",async()=>{signInWithPopup(auth,provider).then(e=>{document.body.style.overflow="",document.querySelector("#login-pop-overlay").classList.remove("login-active");const t=GoogleAuthProvider.credentialFromResult(e),s=t.accessToken,n=e.user;showUserInfo(n)}).catch(e=>{console.error("登入失敗：",e.code,e.message,e.customData.email);const t=GoogleAuthProvider.credentialFromError(e)})}),onAuthStateChanged(auth,e=>{e?showUserInfo(e):document.getElementById("login-btn")!=null&&(document.getElementById("login-btn").style.display="block")});function showUserInfo(e){document.getElementById("login-btn").style.display="none";const t=`
        <img src="${e.photoURL}" class="rounded-circle"/>
      `;document.getElementById("user-info").innerHTML=t,document.getElementById("user-info").style.display="block",document.getElementById("sign-out-btn").style.display="block"}document.getElementById("sign-out-btn")?.addEventListener("click",async()=>{signOut(auth).then(()=>{document.getElementById("user-info").innerHTML="",document.getElementById("user-info").style.display="none",document.getElementById("sign-out-btn").style.display="none",document.getElementById("login-btn").style.display="block"}).catch(e=>{console.error("登出失敗：",e)})})